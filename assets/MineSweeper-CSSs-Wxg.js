import{d as j,e as g,c as f,a as l,w as M,i as h,g as u,F as y,f as x,o as c,n as B,j as S,t as U}from"./index-gK6rWThT.js";const Y={class:"mine-config"},z=l("label",{for:"row",class:"mine-config__label"},"行：",-1),D=l("label",{for:"col",class:"mine-config__label"},"列：",-1),G=l("label",{for:"count",class:"mine-config__label"},"雷数量：",-1),P={class:"mine-map"},R=["onClick","onContextmenu"],L=j({__name:"MineSweeper",setup(X){let d=g(!1),t=g({x:16,y:16,mines:10}),m=new Set,s=g([]);const $=e=>Math.floor(Math.random()*e),b=e=>e-1<0?e:e-1,C=(e,n)=>e+1===n?e:e+1;function v(e){if(e<=0)return;const n=$(t.value.x),i=$(t.value.y);m.has("".concat(n,"-").concat(i))?v(e):(m.add("".concat(n,"-").concat(i)),v(e-1))}function F(e,n,i){if(e===0&&n===0)return 0;let a=b(e),o=b(n),_=C(n,t.value.y),p=0;for(;a<=e;){let r=o;for(;a<e&&r<=_||r<n;)!i&&s.value[a][r].isMine&&p++,i&&!s.value[a][r].isMine&&s.value[a][r].mines++,r++;a++}return p}function k(){for(let e=0;e<t.value.x;e++)for(let n=0;n<t.value.y;n++){const i=m.has("".concat(e,"-").concat(n));s.value[e]||(s.value[e]=[]),s.value[e][n]={x:e,y:n,isMine:i,isFlag:!1,isOpen:!1,mines:F(e,n,i)}}}function w(){s.value&&(s.value.length=0,s.value=new Array(t.value.x)),m.size>0&&m.clear(),v(t.value.mines),k()}function E(){s.value.forEach(e=>e.forEach(n=>n.isOpen=!0))}function O(e){e.isFlag||e.isOpen||d.value||(e.isOpen=!0,e.isMine&&(d.value=!0,e.isExplode=!0,E()))}function V(e){if(!d.value)return e.isFlag=!e.isFlag,!1}return w(),(e,n)=>(c(),f(y,null,[l("div",Y,[z,M(l("input",{id:"row",class:"mine-config__input",type:"number","onUpdate:modelValue":n[0]||(n[0]=i=>u(t).x=i)},null,512),[[h,u(t).x]]),D,M(l("input",{id:"col",class:"mine-config__input",type:"number","onUpdate:modelValue":n[1]||(n[1]=i=>u(t).y=i)},null,512),[[h,u(t).y]]),G,M(l("input",{id:"count",class:"mine-config__input",type:"number","onUpdate:modelValue":n[2]||(n[2]=i=>u(t).mines=i)},null,512),[[h,u(t).mines]]),l("button",{class:"mine-config__btn",onClick:w},"Play")]),l("div",P,[(c(!0),f(y,null,x(u(s),(i,a)=>(c(),f("div",{class:"mine-row",key:"row-".concat(a)},[(c(!0),f(y,null,x(i,(o,_)=>(c(),f("div",{class:B(["mine-cell",["color-".concat(o.mines),{"is-mine":o.isMine,"mine-cell--flag":o.isFlag,"mine-cell--open":o.isOpen,"mine-cell--explode":o.isExplode}]]),key:"cell-".concat(a,"-").concat(_),onClick:p=>O(o),onContextmenu:S(p=>V(o),["prevent"])},U(o.mines||""),43,R))),128))]))),128))])],64))}});export{L as default};
