var A=Object.defineProperty;var E=(o,t,n)=>t in o?A(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;var $=(o,t,n)=>(E(o,typeof t!="symbol"?t+"":t,n),n);import{d as T,r as F,c as g,a as M,o as c,b as d,e as S,F as p,f as w,g as j,n as z,u as C,w as D,t as N,v as K,h as O}from"./index-vvCgJ6FC.js";const b=(o,t)=>Math.floor(o/3)*3+Math.floor(t/3),B=o=>o>0?2**(9-o):0,x=o=>"0".repeat(9-o.length)+o,k=(o,t)=>o|B(t),V=(o,t)=>o&511-B(t),m=(o,t)=>"".concat(o,"-").concat(t);let G=class{constructor(t){$(this,"info",{});$(this,"question");this.question=t,this.setTips(this.getNumberExist())}getNumberExist(){let t=new Array(9).fill(0),n=new Array(9).fill(0),l=new Array(9).fill(0),e=0;for(;e<9;){let s=0;for(;s<9;){if(this.question[e][s]>0){const a=b(e,s);t[e]=k(t[e],this.question[e][s]),n[s]=k(n[s],this.question[e][s]),l[a]=k(l[a],this.question[e][s])}s++}e++}return{rows:t,cols:n,zones:l}}setTips({rows:t,cols:n,zones:l}){let e=0;for(;e<9;){let s=0;for(;s<9;){let a=b(e,s);const f=!!this.question[e][s];let r="";f||(r=(t[e]|n[s]|l[a]).toString(2),r=x(r)),this.info[m(e,s)]={x:e,y:s,z:a,val:this.question[e][s],readonly:f,options:r},s++}e++}}updateTip(t,n,l){const e=this.info[m(t,n)];if(!e||typeof e=="object"&&Object.keys(e).length===0||!e.val&&!l)return;this.question[t][n]=l;let s=0;for(;s<9;){let a=0;for(;a<9;){let f=b(s,a),r=this.info[m(s,a)];if((s===t||a===n||f===e.z)&&!r.readonly){let y=k(V(parseInt(r.options,2),e.val),l).toString(2);r.options=x(y),console.log("修改".concat(s,"-").concat(a,"的选项为：").concat(y,"。旧值：").concat(e.x,"-").concat(e.y,"-").concat(e.val,"当前值为：").concat(l))}a++}s++}e.val=l}};const L={class:"grid"},P=["aria-checked","onClick"],Z={key:0,class:"keyboard"},H=["onClick"],J=T({name:"Sudoku2",__name:"Sudoku2",setup(o){const t=[[0,0,0,0,3,0,6,8,0],[2,0,0,0,5,0,0,0,0],[0,0,0,4,0,0,0,1,3],[0,0,0,2,7,0,0,3,1],[5,0,0,9,0,0,0,0,0],[3,7,0,0,0,0,9,0,0],[0,9,8,5,0,0,0,0,0],[1,0,2,0,0,0,4,6,0],[0,0,0,0,0,0,0,0,0]],n=F(new G(t)),l=g(()=>n.info);let e=M({x:-1,y:-1,z:-1,val:0,readonly:!1,options:""});const s=g(()=>e.value.options.split("").map((u,v)=>({readonly:u==="1",val:v+1}))),a=g(()=>e.value.options);function f(u,v){u||n.updateTip(e.value.x,e.value.y,v)}function r(u){u.readonly||(e.value=u)}function y(u,v){let i=l.value[m(u,v)];return i.x===e.value.x||i.y===e.value.y||i.z===e.value.z}return(u,v)=>(c(),d(p,null,[S("div",L,[(c(!0),d(p,null,w(n.question,(i,h)=>(c(),d("div",{class:"row",key:"row-".concat(h)},[(c(!0),d(p,null,w(i,(q,_)=>(c(),d("div",{class:z(["cell",{"is-readonly":l.value["".concat(h,"-").concat(_)].readonly,"cell--focus":y(h,_)}]),key:"cell-".concat(h,"-").concat(_),"aria-checked":C(e).x===h&&C(e).y===_,onClick:U=>r(l.value["".concat(h,"-").concat(_)])},[D(S("div",null,N(q),513),[[K,q]])],10,P))),128))]))),128))]),a.value?(c(),d("div",Z,[(c(!0),d(p,null,w(s.value,i=>(c(),d("div",{class:z(["keyboard__btn",{"keyboard__btn--disabled":i.readonly}]),key:"key-".concat(i.val),onClick:h=>f(i.readonly,i.val)},N(i.val),11,H))),128))])):j("",!0)],64))}}),Q=(o,t)=>{const n=o.__vccOpts||o;for(const[l,e]of t)n[l]=e;return n},R=Q(J,[["__scopeId","data-v-9103e5e4"]]),I=T({__name:"SudokuGame",setup(o){return(t,n)=>(c(),O(R))}});export{I as default};
