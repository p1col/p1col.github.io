!function(){function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,l,o,a=[],u=!0,c=!1;try{if(l=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=l.call(t)).done)&&(a.push(r.value),a.length!==n);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}function t(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}System.register(["./index-legacy-Z2DYQkCk.js"],(function(t,r){"use strict";var i,l,o,a,u,c,f,s,m,v,d,p,b,g,y;return{setters:[function(e){i=e.d,l=e.e,o=e.b,a=e.i,u=e.c,c=e.a,f=e.w,s=e.j,m=e.g,v=e.t,d=e.F,p=e.f,b=e.o,g=e.n,y=e.k}],execute:function(){var r=document.createElement("style");r.textContent=".color-1{color:#0301fa}.color-2{color:#077d0c}.color-3{color:#fb0500}.color-4{color:#060980}.color-5{color:#790000}.color-6{color:#2a8080}.color-7{color:#000}.color-8{color:gray}.mine-config{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-evenly;align-items:center;padding:2.667vw}.mine-config .mine-config__label{padding-left:2.667vw}.mine-config .mine-config__input{width:13.333vw}.mine-config .mine-config__btn{margin-top:2.667vw}.game-status{text-align:center}.mine-map{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:1.333vw}.mine-map .mine-row{display:flex;flex-direction:row;border-bottom:1px solid #7f7f7f}.mine-map .mine-row:first-of-type{border-top:1px solid #7f7f7f}.mine-map .mine-cell{position:relative;display:flex;justify-content:center;align-items:center;width:5.333vw;height:5.333vw;background:#bebebe;border-right:1px solid #7f7f7f}.mine-map .mine-cell:first-of-type{border-left:1px solid #7f7f7f}.mine-map .mine-cell:after{content:\"\";position:absolute;top:0;right:0;bottom:0;left:0;background:#c2c0c2;border:.8vw solid;border-color:#fbfbfb #7f7f7f #7f7f7f #fbfbfb}.mine-map .mine-cell--open:after{visibility:hidden}.mine-map .mine-cell--flag:after{background:url(\"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%206%206'%20%3e%3cpath%20d='m%204%204,%20l%20-1%200,%20l%200%201,%20l%20-3%200,%20l%200%201,%20l%206%200,%20l%200%20-1,%20l%20-2%200%20z'%20stroke='none'%20fill='black'%20/%3e%3cpath%20d='m%204%200,%20l%20-1%200,%20l%20-3%202,%20l%203%202%20l%201%200%20z'%20stroke='none'%20fill='red'%20/%3e%3c/svg%3e\") center/80% no-repeat,#bebebe}.mine-map .mine-cell--explode:before{content:\"\";position:absolute;top:0;right:0;bottom:0;left:0;background:linear-gradient(45deg,transparent 49%,red 49%,red 51%,transparent 51%),linear-gradient(135deg,transparent 49%,red 49%,red 51%,transparent 51%)}.mine-map .is-mine{background:radial-gradient(#000 40%,#bebebe 42%,#bebebe)}\n",document.head.appendChild(r);var x={class:"mine-config"},h=c("label",{for:"row",class:"mine-config__label"},"行：",-1),w=c("label",{for:"col",class:"mine-config__label"},"列：",-1),_=c("label",{for:"count",class:"mine-config__label"},"雷数量：",-1),k=["max"],j={class:"game-status"},O={class:"mine-map"},S=["onClick","onContextmenu"];t("default",i({__name:"MineSweeper",setup:function(t){var r=l(!1),i=l({x:16,y:16,mines:40}),A=o((function(){return i.value.x*i.value.y})),F=new Set,M=l([]),C=l(i.value.mines),E=l(i.value.x*i.value.y),V=o((function(){return!r.value&&E.value===i.value.mines})),I=function(e){return Math.floor(Math.random()*e)},U=function(e){return e-1<0?e:e-1},z=function(e,n){return e+1===n?e:e+1};function T(e){if(!(e<=0)){var n=I(i.value.x),t=I(i.value.y);F.has("".concat(n,"-").concat(t))?T(e):(F.add("".concat(n,"-").concat(t)),T(e-1))}}function B(e,n,t){if(0===e&&0===n)return 0;for(var r=U(e),l=U(n),o=z(n,i.value.y),a=0;r<=e;){for(var u=l;r<e&&u<=o||u<n;)!t&&M.value[r][u].isMine&&a++,t&&!M.value[r][u].isMine&&M.value[r][u].mines++,u++;r++}return a}function P(){M.value&&(M.value.length=0,M.value=new Array(i.value.x)),F.size>0&&F.clear(),C.value=i.value.mines,E.value=i.value.x*i.value.y,T(i.value.mines),function(){for(var e=0;e<i.value.x;e++)for(var n=0;n<i.value.y;n++){var t=F.has("".concat(e,"-").concat(n));M.value[e]||(M.value[e]=[]),M.value[e][n]={x:e,y:n,isMine:t,isFlag:!1,isOpen:!1,mines:B(e,n,t)}}}(),r.value=!1}a((function(){return V.value}),(function(t){if(t&&C.value>0){var r,i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,l=function(){};return{s:l,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}(F);try{for(i.s();!(r=i.n()).done;){var l=e(r.value.split("-"),2),o=l[0],a=l[1];M.value[+o][+a].isFlag=!0}}catch(u){i.e(u)}finally{i.f()}}}));var $=[],q=[[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1]];function D(e){e.isFlag||e.isOpen||r.value||V.value||(e.isOpen=!0,e.isMine?(r.value=!0,e.isExplode=!0,M.value.forEach((function(e){return e.forEach((function(e){return e.isOpen=!0}))}))):0===e.mines?function(e,n){for($.push({x:e,y:n});$.length>0;){var t=$[0],r=t.x,l=t.y;if(M.value[r][l].isOpen=!0,E.value--,M.value[r][l].isVisit=!0,$.shift(),0===M.value[r][l].mines)for(var o=0,a=q;o<a.length;o++){var u=a[o],c=r+u[0],f=l+u[1];c>=0&&c<i.value.x&&f>=0&&f<i.value.y&&!(M.value[c][f].isOpen||M.value[c][f].isVisit||M.value[c][f].isFlag)&&(M.value[c][f].isVisit=!0,$.push({x:c,y:f}))}}}(e.x,e.y):E.value--)}return P(),function(e,n){return b(),u(d,null,[c("div",x,[h,f(c("input",{id:"row",class:"mine-config__input",type:"number","onUpdate:modelValue":n[0]||(n[0]=function(e){return m(i).x=e})},null,512),[[s,m(i).x]]),w,f(c("input",{id:"col",class:"mine-config__input",type:"number","onUpdate:modelValue":n[1]||(n[1]=function(e){return m(i).y=e})},null,512),[[s,m(i).y]]),_,f(c("input",{id:"count",type:"number",class:"mine-config__input","onUpdate:modelValue":n[2]||(n[2]=function(e){return m(i).mines=e}),max:m(A)},null,8,k),[[s,m(i).mines]]),c("button",{class:"mine-config__btn",onClick:P},"Play")]),c("div",j,v(m(V)?"ψ(｀∇´)ψ 通关！":"ψ(._. )> 剩余标记数：".concat(m(C))),1),c("div",O,[(b(!0),u(d,null,p(m(M),(function(e,n){return b(),u("div",{class:"mine-row",key:"row-".concat(n)},[(b(!0),u(d,null,p(e,(function(e,t){return b(),u("div",{class:g(["mine-cell",["color-".concat(e.mines),{"is-mine":e.isMine,"mine-cell--flag":e.isFlag,"mine-cell--open":e.isOpen,"mine-cell--explode":e.isExplode}]]),key:"cell-".concat(n,"-").concat(t),onClick:y((function(n){return D(e)}),["left"]),onContextmenu:y((function(n){return function(e){if(!r.value&&!V.value)return e.isFlag=!e.isFlag,C.value+=e.isFlag?-1:1,!1}(e)}),["prevent"])},v(e.mines||""),43,S)})),128))])})),128))])],64)}}}))}}}))}();
