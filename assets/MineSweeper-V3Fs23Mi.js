import{d as B,e as y,c as m,a as s,w as v,i as g,g as a,F as M,f as C,o as f,n as E,t as S}from"./index-C3vjZIpr.js";const U={class:"mine-config"},Y=s("label",{for:"row",class:"mine-config__label"},"行：",-1),j=s("label",{for:"col",class:"mine-config__label"},"列：",-1),z=s("label",{for:"count",class:"mine-config__label"},"雷数量：",-1),D={class:"mine-map"},P=["onClick","onContextmenu"],A=B({__name:"MineSweeper",setup(R){let l=y({x:16,y:16,mines:10}),r=new Set,i=y([]);const $=e=>Math.floor(Math.random()*e),h=e=>e-1<0?e:e-1,b=(e,n)=>e+1===n?e:e+1;function _(e){if(e<=0)return;const n=$(l.value.x),t=$(l.value.y);r.has("".concat(n,"-").concat(t))?_(e):(r.add("".concat(n,"-").concat(t)),_(e-1))}function k(e,n,t){if(e===0&&n===0)return 0;let o=h(e),u=h(n),p=b(n,l.value.y),d=0;for(;o<=e;){let c=u;for(;o<e&&c<=p||c<n;)!t&&i.value[o][c].isMine&&d++,t&&!i.value[o][c].isMine&&i.value[o][c].mines++,c++;o++}return d}function x(){for(let e=0;e<l.value.x;e++)for(let n=0;n<l.value.y;n++){const t=r.has("".concat(e,"-").concat(n));i.value[e]||(i.value[e]=[]),i.value[e][n]={x:e,y:n,isMine:t,isFlag:!1,mines:k(e,n,t)}}}function w(){i.value&&(i.value.length=0,i.value=new Array(l.value.x)),r.size>0&&r.clear(),_(l.value.mines),x()}function F(e){console.log("点击",e)}function V(e){console.log("右键：",e)}return w(),(e,n)=>(f(),m(M,null,[s("div",U,[Y,v(s("input",{id:"row",class:"mine-config__input","onUpdate:modelValue":n[0]||(n[0]=t=>a(l).x=t)},null,512),[[g,a(l).x]]),j,v(s("input",{id:"col",class:"mine-config__input","onUpdate:modelValue":n[1]||(n[1]=t=>a(l).y=t)},null,512),[[g,a(l).y]]),z,v(s("input",{id:"count",class:"mine-config__input","onUpdate:modelValue":n[2]||(n[2]=t=>a(l).mines=t)},null,512),[[g,a(l).mines]]),s("button",{class:"mine-config__btn",onClick:w},"Play")]),s("div",D,[(f(!0),m(M,null,C(a(i),(t,o)=>(f(),m("div",{key:"row-".concat(o)},[(f(!0),m(M,null,C(t,(u,p)=>(f(),m("div",{class:E(["mine-cell",{"is-mine":u.isMine}]),key:"cell-".concat(o,"-").concat(p),onClick:d=>F(u),onContextmenu:d=>V(u)},S(u.mines||""),43,P))),128))]))),128))])],64))}});export{A as default};
