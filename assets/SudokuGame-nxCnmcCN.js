var A=Object.defineProperty;var E=(s,t,n)=>t in s?A(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var m=(s,t,n)=>(E(s,typeof t!="symbol"?t+"":t,n),n);import{d as T,r as F,c as g,a as M,o as u,b as d,e as j,F as p,f as b,g as z,n as C,u as S,t as N,h as K}from"./index-CByPp97h.js";const q=(s,t)=>Math.floor(s/3)*3+Math.floor(t/3),B=s=>s>0?2**(9-s):0,x=s=>"0".repeat(9-s.length)+s,k=(s,t)=>s|B(t),O=(s,t)=>s&511-B(t),$=(s,t)=>"".concat(s,"-").concat(t);let V=class{constructor(t){m(this,"info",{});m(this,"question");this.question=t,this.setTips(this.getNumberExist())}getNumberExist(){let t=new Array(9).fill(0),n=new Array(9).fill(0),l=new Array(9).fill(0),e=0;for(;e<9;){let o=0;for(;o<9;){if(this.question[e][o]>0){const a=q(e,o);t[e]=k(t[e],this.question[e][o]),n[o]=k(n[o],this.question[e][o]),l[a]=k(l[a],this.question[e][o])}o++}e++}return{rows:t,cols:n,zones:l}}setTips({rows:t,cols:n,zones:l}){let e=0;for(;e<9;){let o=0;for(;o<9;){let a=q(e,o);const h=!!this.question[e][o];let r="";h||(r=(t[e]|n[o]|l[a]).toString(2),r=x(r)),this.info[$(e,o)]={x:e,y:o,z:a,val:this.question[e][o],readonly:h,options:r},o++}e++}}updateTip(t,n,l){const e=this.info[$(t,n)];if(!e||typeof e=="object"&&Object.keys(e).length===0||!e.val&&!l)return;this.question[t][n]=l;let o=0;for(;o<9;){let a=0;for(;a<9;){let h=q(o,a),r=this.info[$(o,a)];if((o===t||a===n||h===e.z)&&!r.readonly){let v=k(O(parseInt(r.options,2),e.val),l).toString(2);r.options=x(v),console.log("修改".concat(o,"-").concat(a,"的选项为：").concat(v,"。旧值：").concat(e.x,"-").concat(e.y,"-").concat(e.val,"当前值为：").concat(l))}a++}o++}e.val=l}};const D={class:"grid"},G=["aria-checked","onClick"],L={key:0},P={key:0,class:"keyboard"},Z=["onClick"],H=T({name:"Sudoku2",__name:"Sudoku2",setup(s){const t=[[0,0,0,0,3,0,6,8,0],[2,0,0,0,5,0,0,0,0],[0,0,0,4,0,0,0,1,3],[0,0,0,2,7,0,0,3,1],[5,0,0,9,0,0,0,0,0],[3,7,0,0,0,0,9,0,0],[0,9,8,5,0,0,0,0,0],[1,0,2,0,0,0,4,6,0],[0,0,0,0,0,0,0,0,0]],n=F(new V(t)),l=g(()=>n.info);let e=M({x:-1,y:-1,z:-1,val:0,readonly:!1,options:""});const o=g(()=>e.value.options.split("").map((c,f)=>({readonly:c==="1",val:f+1}))),a=g(()=>e.value.options);function h(c,f){c||(console.log("当前选中".concat(e.value.x,"-").concat(e.value.y)),n.updateTip(e.value.x,e.value.y,f))}function r(c){c.readonly||(e.value=c)}function v(c,f){let i=l.value[$(c,f)];return i.x===e.value.x||i.y===e.value.y||i.z===e.value.z}return(c,f)=>(u(),d(p,null,[j("div",D,[(u(!0),d(p,null,b(n.question,(i,_)=>(u(),d("div",{class:"row",key:"row-".concat(_)},[(u(!0),d(p,null,b(i,(w,y)=>(u(),d("div",{class:C(["cell",{"is-readonly":l.value["".concat(_,"-").concat(y)].readonly,"cell--focus":v(_,y)}]),key:"cell-".concat(_,"-").concat(y),"aria-checked":S(e).x===_&&S(e).y===y,onClick:R=>r(l.value["".concat(_,"-").concat(y)])},[w?(u(),d("div",L,N(w),1)):z("",!0)],10,G))),128))]))),128))]),a.value?(u(),d("div",P,[(u(!0),d(p,null,b(o.value,i=>(u(),d("div",{class:C(["keyboard__btn",{"keyboard__btn--disabled":i.readonly}]),key:"key-".concat(i.val),onClick:_=>h(i.readonly,i.val)},N(i.val),11,Z))),128))])):z("",!0)],64))}}),J=(s,t)=>{const n=s.__vccOpts||s;for(const[l,e]of t)n[l]=e;return n},Q=J(H,[["__scopeId","data-v-c1b11e10"]]),Y=T({__name:"SudokuGame",setup(s){return(t,n)=>(u(),K(Q))}});export{Y as default};
