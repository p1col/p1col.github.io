!function(){function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,r,l,o,a=[],u=!0,c=!1;try{if(l=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(i=l.call(t)).done)&&(a.push(i.value),a.length!==n);u=!0);}catch(e){c=!0,r=e}finally{try{if(!u&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}(e,n)||t(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,n){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=t(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==i.return||i.return()}finally{if(u)throw o}}}}function t(e,n){if(e){if("string"==typeof e)return i(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,n):void 0}}function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}System.register(["./index-legacy-CJqHbtN3.js"],(function(t,i){"use strict";var r,l,o,a,u,c,f,s,m,v,d,p,y,b,g,x;return{setters:[function(e){r=e.d,l=e.e,o=e.b,a=e.j,u=e.i,c=e.c,f=e.a,s=e.w,m=e.k,v=e.g,d=e.t,p=e.F,y=e.f,b=e.o,g=e.n,x=e.l}],execute:function(){var i=document.createElement("style");i.textContent=".color-1{color:#0301fa}.color-2{color:#077d0c}.color-3{color:#fb0500}.color-4{color:#060980}.color-5{color:#790000}.color-6{color:#2a8080}.color-7{color:#000}.color-8{color:gray}.mine-config{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-evenly;align-items:center;padding:2.667vw}.mine-config .mine-config__label{padding-left:2.667vw}.mine-config .mine-config__input{width:13.333vw}.mine-config .mine-config__btn{margin-top:2.667vw}.game-status{text-align:center}.mine-map{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:1.333vw}.mine-map .mine-row{display:flex;flex-direction:row;border-bottom:1px solid #7f7f7f}.mine-map .mine-row:first-of-type{border-top:1px solid #7f7f7f}.mine-map .mine-cell{position:relative;display:flex;justify-content:center;align-items:center;width:5.333vw;height:5.333vw;background:#bebebe;border-right:1px solid #7f7f7f}.mine-map .mine-cell:first-of-type{border-left:1px solid #7f7f7f}.mine-map .mine-cell:after{content:\"\";position:absolute;top:0;right:0;bottom:0;left:0;background:#c2c0c2;border:.8vw solid;border-color:#fbfbfb #7f7f7f #7f7f7f #fbfbfb}.mine-map .mine-cell--open:after{visibility:hidden}.mine-map .mine-cell--flag:after{background:url(\"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%206%206'%20%3e%3cpath%20d='m%204%204,%20l%20-1%200,%20l%200%201,%20l%20-3%200,%20l%200%201,%20l%206%200,%20l%200%20-1,%20l%20-2%200%20z'%20stroke='none'%20fill='black'%20/%3e%3cpath%20d='m%204%200,%20l%20-1%200,%20l%20-3%202,%20l%203%202%20l%201%200%20z'%20stroke='none'%20fill='red'%20/%3e%3c/svg%3e\") center/80% no-repeat,#bebebe}.mine-map .mine-cell--explode:before{content:\"\";position:absolute;top:0;right:0;bottom:0;left:0;background:linear-gradient(45deg,transparent 49%,red 49%,red 51%,transparent 51%),linear-gradient(135deg,transparent 49%,red 49%,red 51%,transparent 51%)}.mine-map .is-mine{background:radial-gradient(#000 40%,#bebebe 42%,#bebebe)}\n",document.head.appendChild(i);var h={class:"mine-config"},w=f("label",{for:"row",class:"mine-config__label"},"行：",-1),_=f("label",{for:"col",class:"mine-config__label"},"列：",-1),k=f("label",{for:"count",class:"mine-config__label"},"雷数量：",-1),O=["max"],j={class:"game-status"},S={class:"mine-map"},F=["onClick","onContextmenu"];t("default",r({__name:"MineSweeper",setup:function(t){var i=l(!1),r=l({x:16,y:16,mines:40}),A=o((function(){return r.value.x*r.value.y})),M=new Set,C=l([]),E=l(r.value.mines),V=l(r.value.x*r.value.y),I=o((function(){return!i.value&&V.value===r.value.mines})),U=function(e){return Math.floor(Math.random()*e)},z=function(e){return e-1<0?e:e-1},T=function(e,n){return e+1===n?e:e+1};function B(e){if(!(e<=0)){var n=U(r.value.x),t=U(r.value.y);M.has("".concat(n,"-").concat(t))?B(e):(M.add("".concat(n,"-").concat(t)),B(e-1))}}function P(e,n,t){if(0===e&&0===n)return 0;for(var i=z(e),l=z(n),o=T(n,r.value.y),a=0;i<=e;){for(var u=l;i<e&&u<=o||u<n;)!t&&C.value[i][u].isMine&&a++,t&&!C.value[i][u].isMine&&C.value[i][u].mines++,u++;i++}return a}function $(){C.value&&(C.value.length=0,C.value=new Array(r.value.x)),M.size>0&&M.clear(),E.value=r.value.mines,V.value=r.value.x*r.value.y,B(r.value.mines),function(){for(var e=0;e<r.value.x;e++)for(var n=0;n<r.value.y;n++){var t=M.has("".concat(e,"-").concat(n));C.value[e]||(C.value[e]=[]),C.value[e][n]={x:e,y:n,isMine:t,isFlag:!1,isOpen:!1,mines:P(e,n,t)}}}(),i.value=!1}a((function(){return I.value}),(function(t){if(t&&E.value>0){var i,r=n(M);try{for(r.s();!(i=r.n()).done;){var l=e(i.value.split("-"),2),o=l[0],a=l[1];C.value[+o][+a].isFlag=!0}}catch(u){r.e(u)}finally{r.f()}}}));var q=[],D=[[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1]],G=function(e,n){return e>=0&&e<r.value.x&&n>=0&&n<r.value.y};function H(e){e.isFlag||e.isOpen&&0===e.mines||i.value||I.value||(e.isOpen?function(e){var t,i=[],r=0,l=n(D);try{for(l.s();!(t=l.n()).done;){var o=t.value,a=e.x+o[0],u=e.y+o[1];G(a,u)&&(C.value[a][u].isFlag?r++:C.value[a][u].isOpen||i.push({x:a,y:u}))}}catch(m){l.e(m)}finally{l.f()}if(r===e.mines)for(;i.length>0;){var c=i.shift()||{},f=c.x,s=c.y;H(C.value[f][s])}}(e):(e.isOpen=!0,e.isMine?(i.value=!0,e.isExplode=!0,C.value.forEach((function(e){return e.forEach((function(e){return e.isOpen=!0}))}))):0===e.mines?function(e,t){for(q.push({x:e,y:t});q.length>0;){var i=q[0],r=i.x,l=i.y;if(C.value[r][l].isOpen=!0,V.value--,C.value[r][l].isVisit=!0,q.shift(),0===C.value[r][l].mines){var o,a=n(D);try{for(a.s();!(o=a.n()).done;){var u=o.value,c=r+u[0],f=l+u[1];G(c,f)&&!(C.value[c][f].isOpen||C.value[c][f].isVisit||C.value[c][f].isFlag)&&(C.value[c][f].isVisit=!0,q.push({x:c,y:f}))}}catch(s){a.e(s)}finally{a.f()}}}}(e.x,e.y):V.value--))}return u((function(){$()})),function(e,n){return b(),c(p,null,[f("div",h,[w,s(f("input",{id:"row",class:"mine-config__input",type:"number","onUpdate:modelValue":n[0]||(n[0]=function(e){return v(r).x=e})},null,512),[[m,v(r).x]]),_,s(f("input",{id:"col",class:"mine-config__input",type:"number","onUpdate:modelValue":n[1]||(n[1]=function(e){return v(r).y=e})},null,512),[[m,v(r).y]]),k,s(f("input",{id:"count",type:"number",class:"mine-config__input","onUpdate:modelValue":n[2]||(n[2]=function(e){return v(r).mines=e}),max:v(A)},null,8,O),[[m,v(r).mines]]),f("button",{class:"mine-config__btn",onClick:$},"Play")]),f("div",j,d(v(I)?"ψ(｀∇´)ψ 通关！":"ψ(._. )> 剩余标记数：".concat(v(E))),1),f("div",S,[(b(!0),c(p,null,y(v(C),(function(e,n){return b(),c("div",{class:"mine-row",key:"row-".concat(n)},[(b(!0),c(p,null,y(e,(function(e,t){return b(),c("div",{class:g(["mine-cell",["color-".concat(e.mines),{"is-mine":e.isMine,"mine-cell--flag":e.isFlag,"mine-cell--open":e.isOpen,"mine-cell--explode":e.isExplode}]]),key:"cell-".concat(n,"-").concat(t),onClick:x((function(n){return H(e)}),["left"]),onContextmenu:x((function(n){return function(e){if(!i.value&&!I.value)return e.isFlag=!e.isFlag,E.value+=e.isFlag?-1:1,!1}(e)}),["prevent"])},d(e.mines||""),43,F)})),128))])})),128))])],64)}}}))}}}))}();
