System.register(["./index-legacy-j53kI2So.js"],(function(e,n){"use strict";var i,l,o,t,r,a,c,u,f,s,m,d,p,v;return{setters:[function(e){i=e.d,l=e.e,o=e.b,t=e.c,r=e.a,a=e.w,c=e.i,u=e.g,f=e.F,s=e.f,m=e.o,d=e.n,p=e.j,v=e.t}],execute:function(){var n=document.createElement("style");n.textContent=".color-1{color:#0301fa}.color-2{color:#077d0c}.color-3{color:#fb0500}.color-4{color:#060980}.color-5{color:#790000}.color-6{color:#2a8080}.color-7{color:#000}.color-8{color:gray}.mine-config{display:flex;flex-direction:row;flex-wrap:wrap;padding:5.333vw}.mine-config .mine-config__label{padding-left:2.667vw}.mine-config .mine-config__input{width:13.333vw}.mine-config .mine-config__btn{margin-top:2.667vw}.mine-map{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center}.mine-map .mine-row{display:flex;flex-direction:row;border-bottom:1px solid #7f7f7f}.mine-map .mine-row:first-of-type{border-top:1px solid #7f7f7f}.mine-map .mine-cell{position:relative;display:flex;justify-content:center;align-items:center;width:5.333vw;height:5.333vw;background:#bebebe;border-right:1px solid #7f7f7f}.mine-map .mine-cell:first-of-type{border-left:1px solid #7f7f7f}.mine-map .mine-cell:after{content:\"\";position:absolute;top:0;right:0;bottom:0;left:0;background:#c2c0c2;border:.8vw solid;border-color:#fbfbfb #7f7f7f #7f7f7f #fbfbfb}.mine-map .mine-cell--open:after{visibility:hidden}.mine-map .mine-cell--flag:after{background:url(\"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%206%206'%20%3e%3cpath%20d='m%204%204,%20l%20-1%200,%20l%200%201,%20l%20-3%200,%20l%200%201,%20l%206%200,%20l%200%20-1,%20l%20-2%200%20z'%20stroke='none'%20fill='black'%20/%3e%3cpath%20d='m%204%200,%20l%20-1%200,%20l%20-3%202,%20l%203%202%20l%201%200%20z'%20stroke='none'%20fill='red'%20/%3e%3c/svg%3e\") center/80% no-repeat,#bebebe}.mine-map .mine-cell--explode:before{content:\"\";position:absolute;top:0;right:0;bottom:0;left:0;background:linear-gradient(45deg,transparent 49%,red 49%,red 51%,transparent 51%),linear-gradient(135deg,transparent 49%,red 49%,red 51%,transparent 51%)}.mine-map .is-mine{background:radial-gradient(#000 40%,#bebebe 42%,#bebebe)}\n",document.head.appendChild(n);var g={class:"mine-config"},b=r("label",{for:"row",class:"mine-config__label"},"行：",-1),x=r("label",{for:"col",class:"mine-config__label"},"列：",-1),y=r("label",{for:"count",class:"mine-config__label"},"雷数量：",-1),w=["max"],h={class:"mine-map"},_=["onClick","onContextmenu"];e("default",i({__name:"MineSweeper",setup:function(e){var n=l(!1),i=l({x:16,y:16,mines:20}),k=o((function(){return i.value.x*i.value.y})),M=new Set,C=l([]),F=function(e){return Math.floor(Math.random()*e)},O=function(e){return e-1<0?e:e-1},V=function(e,n){return e+1===n?e:e+1};function E(e){if(!(e<=0)){var n=F(i.value.x),l=F(i.value.y);M.has("".concat(n,"-").concat(l))?E(e):(M.add("".concat(n,"-").concat(l)),E(e-1))}}function j(e,n,l){if(0===e&&0===n)return 0;for(var o=O(e),t=O(n),r=V(n,i.value.y),a=0;o<=e;){for(var c=t;o<e&&c<=r||c<n;)!l&&C.value[o][c].isMine&&a++,l&&!C.value[o][c].isMine&&C.value[o][c].mines++,c++;o++}return a}function z(){C.value&&(C.value.length=0,C.value=new Array(i.value.x)),M.size>0&&M.clear(),E(i.value.mines),function(){for(var e=0;e<i.value.x;e++)for(var n=0;n<i.value.y;n++){var l=M.has("".concat(e,"-").concat(n));C.value[e]||(C.value[e]=[]),C.value[e][n]={x:e,y:n,isMine:l,isFlag:!1,isOpen:!1,mines:j(e,n,l)}}}(),n.value=!1}var S=[],U=[[-1,0],[0,1],[1,0],[0,-1]];function A(e){e.isFlag||e.isOpen||n.value||(e.isOpen=!0,e.isMine?(n.value=!0,e.isExplode=!0,C.value.forEach((function(e){return e.forEach((function(e){return e.isOpen=!0}))}))):0===e.mines&&function(e,n){for(S.push({x:e,y:n});S.length>0;){var l=S[0],o=l.x,t=l.y;if(C.value[o][t].isOpen=!0,C.value[o][t].isVisit=!0,S.shift(),0===C.value[o][t].mines)for(var r=0,a=U;r<a.length;r++){var c=a[r],u=o+c[0],f=t+c[1];u>=0&&u<i.value.x&&f>=0&&f<i.value.y&&!(C.value[u][f].isOpen||C.value[u][f].isVisit||C.value[u][f].isFlag)&&(C.value[u][f].isVisit=!0,S.push({x:u,y:f}))}}}(e.x,e.y))}return z(),function(e,l){return m(),t(f,null,[r("div",g,[b,a(r("input",{id:"row",class:"mine-config__input",type:"number","onUpdate:modelValue":l[0]||(l[0]=function(e){return u(i).x=e})},null,512),[[c,u(i).x]]),x,a(r("input",{id:"col",class:"mine-config__input",type:"number","onUpdate:modelValue":l[1]||(l[1]=function(e){return u(i).y=e})},null,512),[[c,u(i).y]]),y,a(r("input",{id:"count",type:"number",class:"mine-config__input","onUpdate:modelValue":l[2]||(l[2]=function(e){return u(i).mines=e}),max:u(k)},null,8,w),[[c,u(i).mines]]),r("button",{class:"mine-config__btn",onClick:z},"Play")]),r("div",h,[(m(!0),t(f,null,s(u(C),(function(e,i){return m(),t("div",{class:"mine-row",key:"row-".concat(i)},[(m(!0),t(f,null,s(e,(function(e,l){return m(),t("div",{class:d(["mine-cell",["color-".concat(e.mines),{"is-mine":e.isMine,"mine-cell--flag":e.isFlag,"mine-cell--open":e.isOpen,"mine-cell--explode":e.isExplode}]]),key:"cell-".concat(i,"-").concat(l),onClick:p((function(n){return A(e)}),["left"]),onContextmenu:p((function(i){return function(e){if(!n.value)return e.isFlag=!e.isFlag,!1}(e)}),["prevent"])},v(e.mines||""),43,_)})),128))])})),128))])],64)}}}))}}}));
